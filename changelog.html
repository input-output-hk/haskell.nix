<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ChangeLog - Haskell.nix</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Haskell.nix</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p>This file contains a summary of changes to Haskell.nix and <code>nix-tools</code>
that will impact users.</p>
<h2 id="jul-3-2025"><a class="header" href="#jul-3-2025">Jul 3, 2025</a></h2>
<p>Some time ago the behavior of <code>shellFor</code> changed so that the arguments
are now checked against <code>modules/shell.nix</code>.  This was done as part of a fix
for bugs in the way <code>shellFor</code> arguments and project <code>shell</code> arguments
interacted (both are now <code>modules</code> and the normal module merge rules apply).</p>
<p>This means it is no longer possible to pass arbitrarily named arguments
to <code>shellFor</code> in order to set environment variables.</p>
<p>Instead of:</p>
<pre><code>p.shellFor {
  FOO = "bar";
}
</code></pre>
<p>Use:</p>
<pre><code>p.shellFor {
  shellHook = ''
    export FOO="bar"
  '';
}
</code></pre>
<p>or</p>
<pre><code>(p.shellFor {}).overrideAttrs {
   FOO = "bar";
}
</code></pre>
<h2 id="jan-29-2025"><a class="header" href="#jan-29-2025">Jan 29, 2025</a></h2>
<p>Removed GHC &lt;9.6 from CI.</p>
<p>The latest <code>nixpkgs-unstable</code> caused problems with</p>
<ul>
<li>GHC 8.10.7</li>
<li>GHC 9.6.6 mingwW64 (ucrt64 works still as does mingwW64
with newer GHC versions)</li>
</ul>
<h2 id="sep-17-2024"><a class="header" href="#sep-17-2024">Sep 17, 2024</a></h2>
<p>Cabal projects now use the more granular Unit IDs from plan.json
to identify packages.  This allows for different versions of a
package to be used when building <code>built-tool-depends</code> and setup
dependencies.</p>
<p>Overrides in the <code>modules</code> argument apply to all versions of
the package.  However to make this work we needed to make
each <code>packages.somepackage</code> an option (instead of using an
<code>attrsOf</code> the submodule type).</p>
<p>It is now an error to override a package that is not in the
plan.  This can be a problem if different GHC versions, target
platforms, or cabal flag settings cause the package to be
excluded from the plan.  Adding <code>package-keys</code> can tell
haskell.nix to include the option anyway:</p>
<pre><code>  modules = [{
    # Tell haskell.nix that `somepackage` may exist.
    package-keys = ["somepackage"];
    # Now the following will not cause an error even
    # if `somepackage` is not in the plan
    packages.somepackage.flags.someflag = true;
  }];
</code></pre>
<p>There is a helper function you can use to add <code>package-keys</code>
for all of the <code>builtins.attrNames</code> of <code>packages</code>:</p>
<pre><code>  modules = [(pkgs.haskell-nix.haskellLib.addPackageKeys {
    packages.somepackage.flags.someflag = true;
  })];
</code></pre>
<p>Do not use the module's <code>pkgs</code> arg to look <code>addPackageKeys</code> up
though or it will result an <code>infinite recursion</code> error.</p>
<p>Code that uses <code>options.packages</code> will also need to be updated.
For instance the following code that uses <code>options.packages</code>
to set <code>--Werror</code> for local packages:</p>
<pre><code>  ({ lib, ... }: {
    options.packages = lib.mkOption {
      type = lib.types.attrsOf (lib.types.submodule (
        { config, lib, ... }:
        lib.mkIf config.package.isLocal
        {
          configureFlags = [ "--ghc-option=-Werror"];
        }
      ));
    };
  })
</code></pre>
<p>Now needs to do it for each of the entry in <code>config.package-keys</code>
instead of using <code>attrsOf</code>:</p>
<pre><code>  ({ config, lib, ... }: {
    options.packages = lib.genAttrs config.package-keys (_:
      lib.mkOption {
        type = lib.types.submodule (
          { config, lib, ... }:
          lib.mkIf config.package.isLocal
          {
            configureFlags = [ "--ghc-option=-Werror"];
          }
        );
      });
  })
</code></pre>
<h2 id="jun-5-2024"><a class="header" href="#jun-5-2024">Jun 5, 2024</a></h2>
<p>Haskell.nix now respects the <code>pre-existing</code> packages selected
by the cabal planner.  The selection made by the planner
is used to set <code>nonReinstallablePkgs</code>.</p>
<p>Instead setting <code>nonReinstallablePkgs</code> and <code>reinstallableLibGhc</code>
haskell.nix projects should add <code>constraints</code> to the cabal project.</p>
<p>For instance to force the use of the <code>pre-exising</code> <code>text</code>
package add:</p>
<pre><code>  constraints: text installed
</code></pre>
<p>To make sure <code>text</code> is reinstalled use:</p>
<pre><code>  constraints: text source
</code></pre>
<p>The <code>pre-existing</code> <code>ghc</code> will now be used by default as
that is what <code>cabal</code> will choose (haskell.nix used to choose
<code>reinstallableLibGhc=true</code> by default).</p>
<p>To allow cabal to choose reinstalling <code>ghc</code> add:</p>
<pre><code>  allow-boot-library-installs: True
</code></pre>
<p>To force cabal to choose reinstalling:</p>
<pre><code>  constraints: ghc source
  allow-boot-library-installs: True
</code></pre>
<p>It may also need <code>allow-newer: ghc:Cabal</code></p>
<h2 id="mar-27-2023"><a class="header" href="#mar-27-2023">Mar 27, 2023</a></h2>
<p>Haskell.nix will no longer parse the <code>cabal.project</code> file to
determine the <code>index-state</code>. This decision was made due to
the function's inability to handle more than one <code>index-state</code>
or a qualified <code>index-state</code> as the first <code>index-state</code>
field in the file.</p>
<p>As a result, there will be some drawbacks:</p>
<ul>
<li>
<p>There will no longer be a warning in the trace output
if an index state is not found.</p>
</li>
<li>
<p>Even if the <code>index-state:</code> in the <code>cabal.project</code> has not changed,
the plan will be recomputed when hackage.nix is bumped. However, this
is not expected to be a problem since plan recomputations are typically
quick.</p>
</li>
<li>
<p><code>project.index-state</code> cannot be used to obtain the found <code>index-state</code>.
However, the parse function is still available if required
(haskell-nix.haskellLib.parseIndexState).</p>
</li>
</ul>
<h2 id="jul-27-2022"><a class="header" href="#jul-27-2022">Jul 27, 2022</a></h2>
<ul>
<li>
<p>Removed reliance on <code>builtins.currentSystem</code>.  It was used it to provide
<code>pkgs.evalPackages</code> via an overlay that it used to run derivations
used in imports from derivation (IFDs).</p>
<p>These derivations are now run on <code>buildPackages</code> by default.</p>
<p>Passsing <code>evalPackages</code> to a project function will change where all the
derivations used in IFDs are run for that project (including shell tools):
evalPackages = import nixpkgs haskellNix.nixpkgsArgs;</p>
<p>Passing <code>evalSystem</code> instead will use create a suitable <code>nixpkgs</code> using <code>pkgs.path</code>
and <code>pkgs.overlay</code>:
evalSystem = "x86_64-linux";
or
evalSystem = builtins.currentSystem;</p>
<p>The <code>haskellLib.cleanGit</code> function is also affected by this change.  If you are cross
compiling and using <code>cleanGit</code> you should probably do something like:
pkgs = import nixpkgs haskellNix.nixpkgsArgs;
evalPackages = import nixpkgs (haskellNix.nixpkgsArgs // { system = evalSystem; });
p = pkgs.pkgsCross.mingwW64.haskell-nix.cabalProject {
inherit evalPackages;
src = evalPackages.haskell-nix.haskellLib.cleanGit { src = ./.; };
};</p>
</li>
</ul>
<h2 id="feb-16-2022"><a class="header" href="#feb-16-2022">Feb 16, 2022</a></h2>
<ul>
<li>Removed lookupSha256 argument from project functions.
Pass a <code>sha256map</code> instead.</li>
<li>Added better support for <code>repository</code> in <code>cabal.project</code>.  These
blocks should now work without the need for passing <code>extra-hackages</code> and
<code>extra-hackage-tarballs</code>.</li>
</ul>
<h2 id="aug-6-2021"><a class="header" href="#aug-6-2021">Aug 6, 2021</a></h2>
<ul>
<li>Included dependencies of haskell.nix that were tracked in <code>nix/sources.json</code>
as flake inputs (<code>flake.lock</code> replaces <code>nix/sources.json</code>).</li>
<li>Uses <code>flake-compat</code> to continue to provide a compatible interface for non
flake projects.</li>
</ul>
<h2 id="jul-23-2021"><a class="header" href="#jul-23-2021">Jul 23, 2021</a></h2>
<ul>
<li><code>source-repository-package</code> references in <code>cabal.project</code> files are now
left as a <code>source-repository-package</code> when calculating the the <code>plan-nix</code> for
<code>cabalProject</code> based functions.
This makes haskell.nix match the behaviour of <code>cabal</code> better.
Materialized files for projects that use <code>source-repository-package</code>
references will need to be updated.</li>
<li>Only planned components are included in a haskell.nix cabal project.
If cabal solver does not include the component in the <code>plan.json</code> file it
will not be present in <code>hsPkgs.pkg.components</code>.</li>
<li>When the same package occurs more than once in a plan.json file
the latest version is picked by haskell.nix.</li>
</ul>
<h2 id="apr-8-2021"><a class="header" href="#apr-8-2021">Apr 8, 2021</a></h2>
<ul>
<li>Project arguments are now validated with the Nix module system.
If unexpected argments are passed to a project function this may now
result in an error.</li>
</ul>
<h2 id="feb-22-2021"><a class="header" href="#feb-22-2021">Feb 22, 2021</a></h2>
<ul>
<li>Add <code>.dwarf</code> to build any component with DWARF dubug info on linux
(ghc &gt;=8.10.2).</li>
<li>Pass <code>enableDWARF</code> to <code>shellFor</code> for to get a shell where all the
components are the <code>.dwarf</code> ones.</li>
</ul>
<h2 id="feb-18-2021"><a class="header" href="#feb-18-2021">Feb 18, 2021</a></h2>
<ul>
<li><code>ghcOptions</code> has been moved from package and is now a list of strings.
old: packages.x.package.ghcOptions = "someGHCoption";
new: packages.x.ghcOptions = ["someGHCoption"];
To specify ghcOptions for all packages:
ghcOptions = ["someGHCoption"];
For a single component:
packages.x.compoents.library.ghcOptions = ["someGHCoption"];</li>
</ul>
<h2 id="feb-8-2021"><a class="header" href="#feb-8-2021">Feb 8, 2021</a></h2>
<ul>
<li>Removed older versions of haskell-language-server from custom-tools
(0.8.0 is in hackage so we can still get that version).</li>
</ul>
<h2 id="jan-14-2021"><a class="header" href="#jan-14-2021">Jan 14, 2021</a></h2>
<ul>
<li>Added support for cross package refs (with a project).  Relative
directory references between packages within a project should now
work.</li>
<li>Added <code>includeSiblings</code> to <code>cleanSourceWith</code>.  When <code>true</code> it
prevents the <code>subDir</code> arg from causing filtering of other directories.</li>
<li>Added <code>keepGitDir</code> to <code>cleanGit</code> to allow <code>.git</code> directory to be kept
(useful for components that use the <code>githash</code> package).</li>
</ul>
<h2 id="nov-26-2020"><a class="header" href="#nov-26-2020">Nov 26, 2020</a></h2>
<ul>
<li>Renamed <code>otherShells</code> arg for <code>shellFor</code> to `inputsFrom</li>
</ul>
<h2 id="nov-25-2020"><a class="header" href="#nov-25-2020">Nov 25, 2020</a></h2>
<ul>
<li>The <code>shellFor</code> <code>makeConfigFiles</code> <code>ghcWithHoogle</code> and <code>ghcWithPackages</code>
functions have been removed from <code>project.hsPkgs</code>.  Instead access
them from <code>project</code> itself (e.g. change <code>p.hsPkgs.shellFor</code> to <code>p.shellFor</code>).</li>
<li>The reflex-platform like <code>project.shells.ghc</code> has been removed.
If needed, add something like <code>p // { shells.ghc = p.shellFor {} }</code>
to <code>shell.nix</code>.</li>
</ul>
<h2 id="nov-24-2020"><a class="header" href="#nov-24-2020">Nov 24, 2020</a></h2>
<ul>
<li>Added <code>${targetPrefix}cabal</code> wrapper script for running cross
compilers in <code>shellFor</code>.</li>
<li><code>otherShells</code> arg added to <code>shellFor</code>.</li>
</ul>
<h2 id="oct-31-2020"><a class="header" href="#oct-31-2020">Oct 31, 2020</a></h2>
<ul>
<li>Passing <code>tools.hoogle</code> to <code>shellFor</code> with a value suitable for <code>haskel-nix.tool</code> will
use the specified <code>hoogle</code> inside <code>shellFor</code>. This allows for materialization
of <code>hoogle</code>.</li>
</ul>
<h2 id="oct-28-2020"><a class="header" href="#oct-28-2020">Oct 28, 2020</a></h2>
<ul>
<li>Passing <code>compiler-nix-name</code> to project functions for <code>stack.yaml</code>
based projects now overrides the compiler used (was ignored before).</li>
</ul>
<h2 id="sep-8-2020"><a class="header" href="#sep-8-2020">Sep 8, 2020</a></h2>
<ul>
<li>Added the ability to generate coverage reports for packages and
projects.</li>
<li>Added the <code>doCoverage</code> module option that allows users to choose
packages to enable coverage for.</li>
<li>Added a <code>doCoverage</code> flag to the component builder that outputs HPC
information when coverage is enabled.</li>
<li>Added test for coverage.</li>
</ul>
<h2 id="july-21-2020"><a class="header" href="#july-21-2020">July 21, 2020</a></h2>
<ul>
<li>Removed <code>components.all</code>, use <code>symlinkJoin</code> on components.exes or
<code>shellFor</code> if you need a shell.</li>
<li>Added <code>components</code> argument to <code>shellFor</code>.</li>
</ul>
<h2 id="july-21-2020-1"><a class="header" href="#july-21-2020-1">July 21, 2020</a></h2>
<ul>
<li>Added GHC 8.8.4 and replaced 8.8.3 in tests and as the ghc
used to build nix-tools for stack projects.</li>
</ul>
<h2 id="july-20-2020"><a class="header" href="#july-20-2020">July 20, 2020</a></h2>
<ul>
<li>Changed <code>haskell-nix.roots</code> and <code>p.roots</code> to single derivations.</li>
</ul>
<h2 id="july-8-2020"><a class="header" href="#july-8-2020">July 8, 2020</a></h2>
<ul>
<li>Removed <code>sources.nixpkgs-default</code>, use <code>sources.nixpkgs</code> instead.</li>
<li>Removed <code>./nixpkgs</code> directory, use  <code>(import ./. {}).sources</code>
or <code>./nix/sources.nix</code> instead.</li>
<li>Removes V1 interface for details on how to fix old code see:
https://github.com/input-output-hk/haskell.nix/issues/709</li>
<li>Removed defaultCompilerNixName.</li>
<li>cabalProject, cabalProject', hackage-project and hackage-package
now require a <code>compiler-nix-name</code> argument.</li>
<li><code>haskell-nix.tool</code> and <code>.tools</code> now require a <code>compiler-nix-name</code> argument.
New functions <code>p.tool</code> and <code>p.tools</code> (where p is a project) do not.
Like <code>shellFor { tools = ... }</code> they will use the compiler nix name
from the project (including stack projects where it is derived from
the resolver).</li>
<li><code>haskell-nix.alex</code> and <code>haskell-nix.happy</code> have been removed. Use
<code>p.tool "alex" "3.2.5"</code> or <code>shellFor { tools = { alex = "3.2.5"; } }</code>.</li>
<li><code>haskell-nix.nix-tools</code> -&gt; <code>haskell-nix.nix-tools.ghc883</code> (it includes
the hpack exe now).</li>
<li><code>haskell-nix.cabal-install</code> -&gt;
<code>p.tool "cabal" "3.2.0.0"</code> or <code>shellFor { tools = { cabal = "3.2.0.0"; } }</code></li>
<li><code>haskell-nix.haskellNixRoots</code> -&gt; <code>haskell-nix.roots ghc883</code> or <code>p.roots</code></li>
</ul>
<h2 id="june-25-2020"><a class="header" href="#june-25-2020">June 25, 2020</a></h2>
<ul>
<li>Haddock docs are now built in their own derivation when needed (not as part
of the component build).
They should build automatically when something (such as <code>shellFor</code>) attempts
to accesses the <code>.doc</code> attribute of component.</li>
</ul>
<h2 id="december-27-2019"><a class="header" href="#december-27-2019">December 27, 2019</a></h2>
<ul>
<li>Fix overlays/bootstrap.nix to provide LLVM 6, not LLVM 5, to ghc-8.6.X compilers.</li>
</ul>
<h2 id="november-18-2019"><a class="header" href="#november-18-2019">November 18, 2019</a></h2>
<ul>
<li>Changed the <code>cleanSourceHaskell</code> to accept an attrset of <code>src</code> and
(optional) <code>name</code> parameters. This allows you to keep the source
derivation name constant, so that your builds are always
cached. Usage of <code>cleanSourceHaskell</code> will need to be updated.</li>
</ul>
<h2 id="october-12-2019"><a class="header" href="#october-12-2019">October 12, 2019</a></h2>
<ul>
<li><a href="https://input-output-hk.github.io/haskell.nix/reference/library/#shellfor"><code>shellFor</code></a> no longer sets <code>CABAL_CONFIG</code> by default.
This avoids surprising users, but means that Cabal may select a plan which is different to your Haskell.nix package set.
If you would like the old behaviour, use <code>shellFor { exactDeps = true; }</code>.</li>
</ul>
<h2 id="august-9-2019"><a class="header" href="#august-9-2019">August 9, 2019</a></h2>
<ul>
<li>Add the <a href="https://input-output-hk.github.io/haskell.nix/reference/library/#haskellLib"><code>haskellLib.collectComponents</code></a> function.</li>
</ul>
<h2 id="june-21-2019"><a class="header" href="#june-21-2019">June 21, 2019</a></h2>
<ul>
<li>Add <code>ghcWithPackages</code> and <code>ghcWithHoogle</code> to hsPkgs (<a href="https://input-output-hk.github.io/haskell.nix/reference/library/#package-set-functions">documentation</a>.</li>
<li>Benchmark components can now build successfully.</li>
<li>Reduced the closure bloat of nix-tools, and added closure size limit to CI.</li>
<li>Added more reference documentation and set up auto-generated
documentation for <a href="https://input-output-hk.github.io/haskell.nix/reference/modules/">Module Options</a>.</li>
<li>Miscellaneous bug fixes.</li>
</ul>
<h2 id="june-7-2019"><a class="header" href="#june-7-2019">June 7, 2019</a></h2>
<ul>
<li>Several additions to the <a href="https://input-output-hk.github.io/haskell.nix/">documentation</a>.
<ul>
<li>More information about getting nix-tools, Haskell.nix, pinning.</li>
<li>Updates the stack-to-nix and cabal-to-nix guides.</li>
<li>Adds a section on development environments.</li>
<li>Adds a little information about cross compilation.</li>
<li>Adds a (partially complete) reference section (command line manuals, library reference).</li>
<li>Symlinks the changelog into the documentation pages.</li>
</ul>
</li>
</ul>
<h2 id="may-29-2019"><a class="header" href="#may-29-2019">May 29, 2019</a></h2>
<ul>
<li>Added <code>shellFor</code> function to package set.</li>
</ul>
<h2 id="may-28-2019"><a class="header" href="#may-28-2019">May 28, 2019</a></h2>
<ul>
<li>Added <code>snaphots</code> and <code>haskellPackages</code> attributes to the
Haskell.nix top-level.</li>
</ul>
<h2 id="may-22-2019"><a class="header" href="#may-22-2019">May 22, 2019</a></h2>
<ul>
<li>Add the <code>cleanSourceHaskell</code> utility function to the Haskell.nix
top-level.</li>
</ul>
<h2 id="may-21-2019"><a class="header" href="#may-21-2019">May 21, 2019</a></h2>
<ul>
<li>Add the <code>callCabalProjectToNix</code> function, which uses "import from
derivation" (IFD) so that nix-tools doesn't need to be run
manually.</li>
<li>The <code>hackage.nix</code> update process has changed, so that Cabal index
state hashes are also included in the generated repo.</li>
</ul>
<h2 id="may-20-2019"><a class="header" href="#may-20-2019">May 20, 2019</a></h2>
<ul>
<li>Remove Travis CI in favour of Buildkite.</li>
</ul>
<h2 id="may-17-2019"><a class="header" href="#may-17-2019">May 17, 2019</a></h2>
<ul>
<li>Add the <code>callStackToNix</code> function, which uses "import from
derivation" (IFD) so that <code>stack-to-nix</code> doesn't need to be run
manually.</li>
</ul>
<h2 id="mar-15-2019"><a class="header" href="#mar-15-2019">Mar 15, 2019</a></h2>
<ul>
<li>
<p><code>overlays</code> was renamed to <code>extras</code> in
<a href="https://github.com/input-output-hk/haskell.nix/pull/79">#79</a>
to prevent confusion between the notion of Nix overlays.</p>
<p>Therefore <code>plan-pkgs</code> and <code>stack-pkgs</code> as generated by <code>plan-to-nix</code> and <code>stack-to-nix</code> will
expose <code>extras</code> instead of <code>overlay</code>. Similarly <code>mkStackPkgSet</code>, <code>mkPkgSet</code> and <code>mkCabalProjectPkgSet</code>
take a <code>pkg-def-extras</code> instead of <code>pkg-def-overlay</code> argument.  If you are using <code>iohk-nix</code>, the
<code>iohk-overlay</code> was parameter was renamed to <code>iohk-extras</code>.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="dev/hix.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="dev/hix.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
